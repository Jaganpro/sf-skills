# Val_IO_Meta_Props - Tests I/O-level metadata properties on action inputs/outputs
# Purpose: Verify that I/O metadata properties compile on action definitions with targets
#
# Properties Tested (I/O-Level):
#   - is_required: True (on input — marks parameter as required for LLM)
#   - is_user_input: True (on input — LLM extracts value from conversation)
#   - is_displayable: False (on output — hides value from user display)
#   - is_used_by_planner: True (on output — LLM can reason about value)
#
# Expected: POSITIVE — all I/O properties compile and publish
# Apex Target: TestApexAction (already deployed to AgentforceTesting from v2.1.0)
#
# SKILL.md Section: Action Output Flags, new Action I/O Metadata Properties section
# Source: Production findings from internal agents, TDD v2.2.0

system:
   messages:
      welcome: "I/O metadata properties validation ready."
      error: "I/O metadata properties validation error."
   instructions: "This agent validates I/O metadata properties on action inputs and outputs."

config:
   agent_name: "Val_IO_Meta_Props"
   agent_label: "Validation: I/O Metadata Properties"
   description: "Tests I/O metadata properties (is_required, is_user_input, is_displayable, is_used_by_planner)"
   default_agent_user: "multistepworkflows@00dak00000gdhgd1068670160.ext"

variables:
   result: mutable string = ""

topic io_meta_test:
   description: "Tests I/O-level metadata properties on action inputs and outputs"

   actions:
      test_io:
         description: "Tests I/O metadata properties"
         inputs:
            inputText: string
               description: "Required user input"
               is_required: True
               is_user_input: True
         outputs:
            outputText: string
               description: "Hidden planner output"
               is_displayable: False
               is_used_by_planner: True
         target: "apex://TestApexAction"

   reasoning:
      instructions: |
         Help the user test I/O metadata properties.
         Ask for some text to process.
      actions:
         process: @actions.test_io
            with inputText = ...
            set @variables.result = @outputs.outputText

start_agent entry:
   description: "Entry point for I/O metadata properties validation"
   reasoning:
      instructions: |
         Begin validation by transitioning to the test topic.
      actions:
         begin: @utils.transition to @topic.io_meta_test
            description: "Start I/O metadata property tests"
