# Val_Action_Properties - Tests action properties on @utils.transition actions
# Purpose: Verify which action properties are valid on UTILITY actions (transitions)
#
# RESULT: Action metadata properties are NOT valid on @utils.transition (as of Winter '26)
# - require_user_confirmation: NOT valid on @utils.transition
# - include_in_progress_indicator: NOT valid on @utils.transition
# - output_instructions: NOT valid on @utils.transition
# - progress_indicator_message: NOT valid on @utils.transition
# - ONLY description works on @utils.transition actions
#
# ⚠️ SCOPE CLARIFICATION (TDD v2.2.0): These properties ARE valid on action
# definitions with `target:` (Level 1 actions backed by flow:// or apex://).
# Val_Action_Meta_Props (agent #23) confirms label, require_user_confirmation,
# include_in_progress_indicator, and progress_indicator_message ALL compile on
# target-backed actions. The negative finding here applies ONLY to @utils.transition.
#
# SKILL.md Section: Feature Validity by Context
# Source: TDD validation 2026-01-20 (scoped to @utils.transition only)

system:
   messages:
      welcome: "Action properties validation ready."
      error: "Action properties validation error."
   instructions: "This agent confirms which action properties are valid."

config:
   agent_name: "Val_Action_Properties"
   agent_label: "Validation: Action Properties"
   description: "Confirms which action properties are valid in Agent Script"
   default_agent_user: "multistepworkflows@00dak00000gdhgd1068670160.ext"

variables:
   action_called: mutable boolean = False

topic main:
   description: "Test valid action properties only"
   reasoning:
      instructions: |
         This topic tests only VALID action properties.
         CONFIRMED NOT VALID: require_user_confirmation, include_in_progress_indicator, output_instructions, progress_indicator_message (on transitions)
         CONFIRMED VALID: description (only property that works on @utils.transition)
      actions:
         # Only description works on @utils.transition actions
         test_action: @utils.transition to @topic.verify
            description: "Test action with description only"

topic verify:
   description: "Verify action properties work"
   reasoning:
      instructions: |
         Action properties validation PASSED.
         Valid properties on @utils.transition: description ONLY
         Invalid properties: require_user_confirmation, include_in_progress_indicator, output_instructions, progress_indicator_message (on transitions)

start_agent entry:
   description: "Entry point for action properties validation"
   reasoning:
      instructions: |
         Begin action properties validation.
      actions:
         begin: @utils.transition to @topic.main
            description: "Start action property tests"
