# Val_Action_Meta_Props - Tests action-level metadata properties on target-backed actions
# Purpose: Verify that action metadata properties compile on @actions.* definitions with targets
#
# CONTEXT: TDD v1.3.0 (Val_Action_Properties) only tested properties on @utils.transition
# actions, which have limited property support. This agent tests the SAME properties on
# action definitions with `target:` (Level 1 actions backed by apex://TestApexAction).
#
# Properties Tested (Action-Level):
#   - label: on action definition, on topic, on inputs, on outputs
#   - require_user_confirmation: True (compiles; runtime is Issue 6 no-op)
#   - include_in_progress_indicator: True
#   - progress_indicator_message: "Processing your request..."
#
# Expected: POSITIVE â€” all properties compile and publish on target-backed actions
# Apex Target: TestApexAction (already deployed to AgentforceTesting from v2.1.0)
#
# SKILL.md Section: Features NOT Valid table (to be corrected), Action I/O Metadata Properties
# Source: Production findings from internal agents, TDD v2.2.0

system:
   messages:
      welcome: "Action metadata properties validation ready."
      error: "Action metadata properties validation error."
   instructions: "This agent validates action-level metadata properties on target-backed actions."

config:
   agent_name: "Val_Action_Meta_Props"
   agent_label: "Validation: Action Metadata Properties"
   description: "Tests action metadata properties on action definitions with targets"
   default_agent_user: "multistepworkflows@00dak00000gdhgd1068670160.ext"

variables:
   result: mutable string = ""

topic action_meta_test:
   label: "Action Metadata Test Topic"
   description: "Tests action-level metadata properties on a target-backed action"

   actions:
      test_action:
         label: "Test Action Label"
         description: "Tests action-level metadata properties"
         require_user_confirmation: True
         include_in_progress_indicator: True
         progress_indicator_message: "Processing your request..."
         inputs:
            inputText: string
               description: "Test input"
               label: "Input Display Label"
         outputs:
            outputText: string
               description: "Test output"
               label: "Output Display Label"
         target: "apex://TestApexAction"

   reasoning:
      instructions: |
         Help the user test action metadata properties.
         Ask for some text to process.
      actions:
         process: @actions.test_action
            with inputText = ...
            set @variables.result = @outputs.outputText

start_agent entry:
   description: "Entry point for action metadata properties validation"
   reasoning:
      instructions: |
         Begin validation by transitioning to the test topic.
      actions:
         begin: @utils.transition to @topic.action_meta_test
            description: "Start action metadata property tests"
